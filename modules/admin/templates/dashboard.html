{% extends "base.html" %}

{% block title %}Dashboard - Golden Bee Admin{% endblock %}

{% block page_title %}Dashboard Overview{% endblock %}

{% block topbar_actions %}
    
{% endblock %}

{% block extra_css %}
<style>
    /* Dashboard Stats Cards */
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }

    .stat-card {
        background: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
    }

    .stat-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 4px;
        background: linear-gradient(90deg, #FFC107, #FFD54F);
        transform: scaleX(0);
        transform-origin: left;
        transition: transform 0.3s ease;
    }

    .stat-card:hover::before {
        transform: scaleX(1);
    }

    .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }

    .stat-icon {
        font-size: 40px;
        margin-bottom: 15px;
        display: inline-block;
        animation: float 3s ease-in-out infinite;
    }

    @keyframes float {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-10px); }
    }

    .stat-value {
        font-size: 32px;
        font-weight: 700;
        color: #333;
        margin-bottom: 5px;
    }

    .stat-label {
        font-size: 14px;
        color: #666;
        font-weight: 500;
    }

    .stat-trend {
        margin-top: 10px;
        font-size: 13px;
        display: flex;
        align-items: center;
        gap: 5px;
    }

    .trend-up {
        color: #28a745;
    }

    .trend-down {
        color: #dc3545;
    }

    /* Welcome Section */
    .welcome-section {
        background: linear-gradient(135deg, #FFC107 0%, #FFD54F 100%);
        border-radius: 15px;
        padding: 30px;
        margin-bottom: 30px;
        color: #333;
        box-shadow: 0 4px 15px rgba(255, 193, 7, 0.3);
        animation: slideInDown 0.6s ease-out;
    }

    @keyframes slideInDown {
        from {
            transform: translateY(-30px);
            opacity: 0;
        }
        to {
            transform: translateY(0);
            opacity: 1;
        }
    }

    .welcome-section h2 {
        font-size: 28px;
        margin-bottom: 10px;
    }

    .welcome-section p {
        font-size: 16px;
        opacity: 0.9;
    }

    /* Dashboard Cards Grid */
    .dashboard-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }

    .dashboard-card {
        background: white;
        border-radius: 15px;
        padding: 30px;
        text-align: center;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        position: relative;
        overflow: hidden;
    }

    .dashboard-card::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        border-radius: 50%;
        background: rgba(255, 193, 7, 0.1);
        transform: translate(-50%, -50%);
        transition: width 0.6s, height 0.6s;
    }

    .dashboard-card:hover::after {
        width: 400px;
        height: 400px;
    }

    .dashboard-card:hover {
        transform: translateY(-10px) scale(1.02);
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.2);
    }

    .card-icon {
        font-size: 50px;
        margin-bottom: 20px;
        display: inline-block;
        transition: all 0.3s;
        position: relative;
        z-index: 1;
    }

    .dashboard-card:hover .card-icon {
        transform: scale(1.2) rotate(10deg);
    }

    .card-title {
        font-weight: 700;
        font-size: 20px;
        margin-bottom: 12px;
        color: #333;
        position: relative;
        z-index: 1;
    }

    .card-description {
        color: #666;
        font-size: 14px;
        margin-bottom: 20px;
        line-height: 1.6;
        position: relative;
        z-index: 1;
    }

    .card-button {
        display: inline-block;
        padding: 12px 30px;
        background: linear-gradient(135deg, #FFC107, #FFD54F);
        color: #333;
        text-decoration: none;
        border-radius: 25px;
        font-size: 15px;
        font-weight: 600;
        transition: all 0.3s;
        box-shadow: 0 4px 12px rgba(255, 193, 7, 0.3);
        position: relative;
        z-index: 1;
    }

    .card-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(255, 193, 7, 0.5);
    }

    /* Quick Actions Section */
    .quick-actions {
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        margin-top: 30px;
    }

    .quick-actions h3 {
        font-size: 22px;
        margin-bottom: 20px;
        color: #333;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .action-buttons {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
    }

    .action-btn {
        padding: 12px 25px;
        background: linear-gradient(135deg, #FFC107, #FFD54F);
        color: #333;
        text-decoration: none;
        border-radius: 10px;
        font-weight: 600;
        transition: all 0.3s;
        box-shadow: 0 3px 10px rgba(255, 193, 7, 0.3);
        display: inline-flex;
        align-items: center;
        gap: 8px;
    }

    .action-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(255, 193, 7, 0.5);
    }

    /* Recent Activity Section */
    .recent-activity {
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        margin-top: 30px;
    }

    .recent-activity h3 {
        font-size: 22px;
        margin-bottom: 20px;
        color: #333;
    }

    .activity-item {
        padding: 15px;
        border-left: 3px solid #FFC107;
        background: #f9f9f9;
        border-radius: 8px;
        margin-bottom: 12px;
        transition: all 0.3s;
    }

    .activity-item:hover {
        background: #fff;
        transform: translateX(5px);
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
    }

    .activity-time {
        font-size: 12px;
        color: #999;
        margin-top: 5px;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
        .stats-grid {
            grid-template-columns: 1fr;
        }

        .dashboard-grid {
            grid-template-columns: 1fr;
        }

        .action-buttons {
            flex-direction: column;
        }

        .action-btn {
            width: 100%;
            justify-content: center;
        }
    }
</style>
{% endblock %}

{% block content %}
<!-- Welcome Section -->
<div class="welcome-section">
    <h2>üëã Welcome back, {{ username if username else 'Admin' }}!</h2>
    <p>Welcome to the Golden Bee Admin Panel. Manage your system efficiently from here.</p>
</div>

<!-- Statistics Cards -->
<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-icon">üë•</div>
        <div class="stat-value">24</div>
        <div class="stat-label">Total Distributors</div>
        <div class="stat-trend trend-up">
            ‚Üë <span>12% from last month</span>
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-icon">üì¶</div>
        <div class="stat-value">156</div>
        <div class="stat-label">Total Products</div>
        <div class="stat-trend trend-up">
            ‚Üë <span>8% from last month</span>
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-icon">üõí</div>
        <div class="stat-value">89</div>
        <div class="stat-label">Pending Orders</div>
        <div class="stat-trend trend-down">
            ‚Üì <span>5% from last week</span>
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-icon">üìä</div>
        <div class="stat-value">92%</div>
        <div class="stat-label">Stock Levels</div>
        <div class="stat-trend trend-up">
            ‚Üë <span>Healthy inventory</span>
        </div>
    </div>
</div>

<!-- Dashboard Management Cards -->
<div class="dashboard-grid">
    <!-- Manage Distributors Card -->
    <div class="dashboard-card">
        <div class="card-icon">üë•</div>
        <div class="card-title">Distributors</div>
        <p class="card-description">Manage distributor accounts, view details, and handle registrations</p>
        <a href="{{ url_for('distributor_mgmt.manage_distributors') }}" class="card-button">
            Manage Now
        </a>
    </div>

    <!-- Manage Categories Card -->
    <div class="dashboard-card">
        <div class="card-icon">üìÅ</div>
        <div class="card-title">Categories</div>
        <p class="card-description">Organize and manage product categories for better organization</p>
        <a href="{{ url_for('category_mgmt.manage_categories') }}" class="card-button">
            Manage Now
        </a>
    </div>

    <!-- Manage Products Card -->
    <div class="dashboard-card">
        <div class="card-icon">üì¶</div>
        <div class="card-title">Products</div>
        <p class="card-description">Add, edit, and manage products with variations and pricing</p>
        <a href="{{ url_for('product_mgmt.manage_products') }}" class="card-button">
            Manage Now
        </a>
    </div>

    <!-- Manage Stock Card -->
    <div class="dashboard-card">
        <div class="card-icon">üìä</div>
        <div class="card-title">Stock Management</div>
        <p class="card-description">Track inventory levels, update stock, and manage supply</p>
        <a href="{{ url_for('stock_mgmt.manage_stock') }}" class="card-button">
            Manage Now
        </a>
    </div>

    <!-- Manage Orders Card -->
    <div class="dashboard-card">
        <div class="card-icon">üõí</div>
        <div class="card-title">Orders</div>
        <p class="card-description">Process distributor orders, track status, and handle deliveries</p>
        <a href="{{ url_for('orderad_mgmt_bp.manage_adorders') }}" class="card-button">
            Manage Now
        </a>
    </div>

    <!-- Reports Card (Optional) -->
    <div class="dashboard-card">
        <div class="card-icon">üìà</div>
        <div class="card-title">Reports & Analytics</div>
        <p class="card-description">View sales reports, analytics, and business insights</p>
        <a href="#" class="card-button" onclick="alert('Coming soon!'); return false;">
            View Reports
        </a>
    </div>
</div>

<!-- Quick Actions -->
<div class="quick-actions">
    <h3>‚ö° Quick Actions</h3>
    <div class="action-buttons">
        <a href="{{ url_for('distributor_mgmt.manage_distributors') }}" class="action-btn">
            <span>üë•</span> Manage Distributors
        </a>
        <a href="{{ url_for('category_mgmt.manage_categories') }}" class="action-btn">
            <span>üìÅ</span> Manage Categories
        </a>
        <a href="{{ url_for('product_mgmt.manage_products') }}" class="action-btn">
            <span>üì¶</span> Manage Products
        </a>
        <a href="{{ url_for('stock_mgmt.manage_stock') }}" class="action-btn">
            <span>üìä</span> Manage Stock
        </a>
        <a href="{{ url_for('orderad_mgmt_bp.manage_adorders') }}" class="action-btn">
            <span>üõí</span> Manage Orders
        </a>
    </div>
</div>

<!-- Recent Activity -->
<div class="recent-activity">
    <h3>üìã Recent Activity</h3>
    <div class="activity-item">
        <strong>New order received</strong> - Order #1234 from XYZ Distributors
        <div class="activity-time">2 hours ago</div>
    </div>
    <div class="activity-item">
        <strong>Stock updated</strong> - Product "Golden Honey 500g" restocked
        <div class="activity-time">5 hours ago</div>
    </div>
    <div class="activity-item">
        <strong>New distributor registered</strong> - ABC Trading Company
        <div class="activity-time">1 day ago</div>
    </div>
    <div class="activity-item">
        <strong>Category added</strong> - New category "Organic Products" created
        <div class="activity-time">2 days ago</div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Refresh Dashboard Function
    function refreshDashboard() {
        // Add loading animation
        const btn = event.target;
        btn.style.transform = 'rotate(360deg)';
        btn.disabled = true;
        
        // Simulate refresh (in production, this would reload data)
        setTimeout(() => {
            btn.style.transform = 'rotate(0deg)';
            btn.disabled = false;
            
            // Show success message
            showNotification('Dashboard refreshed successfully!', 'success');
        }, 1000);
    }

    // Show notification function
    function showNotification(message, type = 'info') {
        const notification = document.createElement('div');
        notification.className = `flash-message flash-${type}`;
        notification.innerHTML = `
            <span>${type === 'success' ? '‚úì' : '‚Ñπ'}</span>
            <span>${message}</span>
        `;
        
        const container = document.querySelector('.flash-messages') || createFlashContainer();
        container.appendChild(notification);
        
        setTimeout(() => {
            notification.style.animation = 'slideOutRight 0.5s ease-out forwards';
            setTimeout(() => notification.remove(), 500);
        }, 3000);
    }

    // Create flash container if it doesn't exist
    function createFlashContainer() {
        const container = document.createElement('div');
        container.className = 'flash-messages';
        document.querySelector('.content-container').prepend(container);
        return container;
    }

    // Animate stats on page load
    document.addEventListener('DOMContentLoaded', function() {
        const statValues = document.querySelectorAll('.stat-value');
        
        statValues.forEach(stat => {
            const finalValue = parseInt(stat.textContent);
            const isPercentage = stat.textContent.includes('%');
            let currentValue = 0;
            const increment = Math.ceil(finalValue / 50);
            
            const timer = setInterval(() => {
                currentValue += increment;
                if (currentValue >= finalValue) {
                    currentValue = finalValue;
                    clearInterval(timer);
                }
                stat.textContent = currentValue + (isPercentage ? '%' : '');
            }, 20);
        });

        // Stagger animation for dashboard cards
        const cards = document.querySelectorAll('.dashboard-card');
        cards.forEach((card, index) => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(30px)';
            
            setTimeout(() => {
                card.style.transition = 'all 0.5s ease-out';
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
            }, index * 100);
        });
    });
</script>
{% endblock %}